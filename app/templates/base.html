{% extends "bootstrap/base.html" %}

{% block html_attribs %} lang="zh-cmn-hans"{% endblock %}
{#{% block html_attribs %} lang="en"{% endblock %}#}

{% block title %}{{ _('Home') }} | {{ 'Wave' }}{% endblock %}

{% block metas %}
    {{ super() }}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="author" content="Rockham">
    <meta name="description" content="">
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#ffffff">
{#    <link rel="shortcut icon" href="{{ url_for('static', filename='icons/favicon.ico') }}" type="image/x-icon">#}
{#    <link rel="icon" href="{{ url_for('static', filename='icons/favicon.ico') }}" type="image/x-icon">#}
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='wave/apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='wave/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='wave/favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='wave/site.webmanifest') }}">
    <link rel="mask-icon" href="{{ url_for('static', filename='wave/safari-pinned-tab.svg') }}" color="#5bbad5">
{% endblock %}

{% block styles %}
    {{ super() }}
    <!-- Custom styles -->
    <link href="{{ url_for('static', filename='css/wave.css') }}" rel="stylesheet">
{% endblock %}

{% block head %}
    {{ super() }}
{% endblock %}

{% block navbar %}
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="{{ url_for('frontend.index') }}">üåä<img src="{{ url_for('static', filename='wave/favicon-50x50.png') }}" alt="brand"></a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
          <li><a href="{{ url_for('frontend.index') }}">{{ _('Home') }}</a></li>
          <li><a href="{{ url_for('post.newest') }}">{{ _('Newest') }}</a></li>
          <li><a href="{{ url_for('post.followed') }}">{{ _('My Followed Article') }}</a></li>
{#          TODO: Trending#}
          <li><a href="{{ url_for('frontend.user', username=current_user.username) }}">{{ _('Profile') }}</a></li>
          <li><a href="{{ url_for('post.write') }}">{{ _('Write a article') }}</a></li>
        <li><a href="#about">{{ _('About') }}</a></li>
{#        <li><a href="#contact">Contact Me</a></li>#}
      </ul>
{#      user dropdown menu#}
      <ul class="nav navbar-nav navbar-right">
        {% if current_user.is_authenticated %}
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <img src="{{ current_user.avatar(size=19) }}" alt="avatar" class="avatar"><b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
{#                <li>#}
{#                    <a href="#">{{ 'signed in as %s' %current_user.username }}</a>#}
{#                </li>#}
                <li>
                    <a href="{{ url_for('post.write') }}">
                        <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>{{ _('Write a article') }}
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('frontend.user', username=current_user.username) }}">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>{{ _('My profile') }}
                    </a>
                </li>
{#                <li>#}
{#                    <a href="{{ url_for('frontend.user', username=current_user.username) }}">#}
{#                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>{{ _('My posts') }}#}
{#                    </a>#}
{#                </li>#}
                <li>
                    <a href="{{ url_for('frontend.following', username=current_user.username) }}">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>{{ _('My following') }}
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('frontend.followers', username=current_user.username) }}">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span>{{ _('My followers') }}
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('frontend.user', username=current_user.username) }}">
                        <span class="glyphicon glyphicon-bell" aria-hidden="true"></span>{{ _('Notifications') }}
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('frontend.user', username=current_user.username) }}">
                        <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>{{ _('Messages') }}
                    </a>
                </li>
                <li role="separator" class="divider"></li>
                <li><a href="{{ url_for('auth.change_password') }}">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>{{ _('Change password') }}</a></li>
{#                <li><a href="{{ url_for('auth.password_reset_request') }}">ÈáçÁΩÆÂØÜÁ†Å</a></li>#}
                <li><a href="{{ url_for('auth.change_email_request') }}">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>{{ _('Change email') }}</a></li>
                <li role="separator" class="divider"></li>
                <li>
                    <a href="{{ url_for('frontend.user', username=current_user.username) }}">
                        <span class="glyphicon glyphicon-book" aria-hidden="true"></span>{{ _('Help') }}
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('frontend.user', username=current_user.username) }}">
                        <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>{{ _('Settings') }}
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('auth.logout') }}">
                        <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>{{ _('Sign out') }}
                    </a>
                </li>
            </ul>
          </li>
        {% else %}
            <li><a href="{{ url_for('auth.login') }}">{{ _('Sign in') }}</a></li>
        {% endif %}
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>
{% endblock %}

{% block content %}

    <div class="container">
      {% for message in get_flashed_messages() %}
      <div class="alert alert-info">
        <button class="close" type="button" data-dismiss="alert">x</button>
        {{ message }}
      </div>
      {% endfor %}
    </div>
{% endblock %}

{% block scripts %}
{{ super() }}
{#    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.js"></script>#}
{#    <script src="{{ url_for('static', filename='js/moment-with-locales.js') }}"></script>#}
{#    <script>moment.locale('zh-CN');</script>#}
    {{ moment.include_moment() }}

    <script src="{{ url_for('static', filename='js/wave.js') }}"></script>

    {% if current_user.is_authenticated %}
        {{ moment.locale(current_user.locale) }}
    {% else %}
        {{ moment.locale(auto_detect=True) }}
    {% endif %}

{% endblock %}
